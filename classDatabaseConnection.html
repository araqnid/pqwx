<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PQWX: DatabaseConnection Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="pqwx-appicon-48.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PQWX
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">PostgreSQLclient</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">DatabaseConnection Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="DatabaseConnection" -->
<p>Represents a connection to a server/database.  
 <a href="classDatabaseConnection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="database__connection_8h_source.html">database_connection.h</a>&gt;</code></p>

<p><a href="classDatabaseConnection-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection_1_1NotificationReceiver.html">NotificationReceiver</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for receiving an asynchronous notification from the monitor.  <a href="classDatabaseConnection_1_1NotificationReceiver.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>WorkerThread</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92">State</a> { <br/>
&#160;&#160;<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92aeb128abcd9165b2dba1ebfdece72dcae">NOT_CONNECTED</a>, 
<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92a14a506e7c11ef09afcd5daaec811a572">INITIALISING</a>, 
<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92ae5093d334f5876d1200e4e16d7a7319f">CONNECTING</a>, 
<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92a825b1401114c4dd6ebc6630c9e753128">IDLE</a>, 
<br/>
&#160;&#160;<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92afd4222b29a5671fcd2dfaf5c0645fbba">EXECUTING</a>, 
<a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92a398a7d72845d5f7cdf9acdd9f3a081cf">DISCONNECTED</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection state.  <a href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a95bc5c496c83846966bfa8d69cb493d9">DatabaseConnection</a> (const <a class="el" href="classServerConnection.html">ServerConnection</a> &amp;server, const wxString &amp;dbname)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a database connection.  <a href="#a95bc5c496c83846966bfa8d69cb493d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a74b007c99626b37e0105a38111e9ca85">Connect</a> (<a class="el" href="classConnectionCallback.html">ConnectionCallback</a> *callback=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin connection to database.  <a href="#a74b007c99626b37e0105a38111e9ca85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#ac0be91d57adf17622dcb32bb2247b804">CloseSync</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the connection synchronously.  <a href="#ac0be91d57adf17622dcb32bb2247b804"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a0afbcc93d90448e5639ca18f734e14c9">BeginDisconnection</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request disconnection.  <a href="#a0afbcc93d90448e5639ca18f734e14c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a1843e1eff1fd933a3b97d03cce820070">WaitUntilClosed</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until the connection has closed.  <a href="#a1843e1eff1fd933a3b97d03cce820070"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a2db9b9fc08e8551343d7f0d9d52f6f34">Dispose</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispose of this database connection.  <a href="#a2db9b9fc08e8551343d7f0d9d52f6f34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#af296a8eac29ce02536da0f056c507346">AddWork</a> (<a class="el" href="classDatabaseWork.html">DatabaseWork</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds work to this connection's work queue.  <a href="#af296a8eac29ce02536da0f056c507346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a2039df6813bd1f9900f3967d4b68351d">AddWorkOnlyIfConnected</a> (<a class="el" href="classDatabaseWork.html">DatabaseWork</a> *work)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds work to this connections' work queue, if possible.  <a href="#a2039df6813bd1f9900f3967d4b68351d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a172ba517f12e13b5f085eef1e40db7d8">LogSql</a> (const char *sql)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs SQL performed on this connection.  <a href="#a172ba517f12e13b5f085eef1e40db7d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a511f88b7e270f0f2fd9b39a4d6b637d5"></a><!-- doxytag: member="DatabaseConnection::LogDisconnect" ref="a511f88b7e270f0f2fd9b39a4d6b637d5" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a511f88b7e270f0f2fd9b39a4d6b637d5">LogDisconnect</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a disconnection event. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c1e932b235c57a569dec6cffcb99eb7"></a><!-- doxytag: member="DatabaseConnection::LogConnect" ref="a6c1e932b235c57a569dec6cffcb99eb7" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a6c1e932b235c57a569dec6cffcb99eb7">LogConnect</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a connection event. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c7af436c57959fac795e7ac662d8642"></a><!-- doxytag: member="DatabaseConnection::LogConnectFailed" ref="a1c7af436c57959fac795e7ac662d8642" args="(const char *msg)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a1c7af436c57959fac795e7ac662d8642">LogConnectFailed</a> (const char *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a connection failure. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7428feadba1e425d49f5e2c8ce0e261"></a><!-- doxytag: member="DatabaseConnection::LogConnectNeedsPassword" ref="ab7428feadba1e425d49f5e2c8ce0e261" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#ab7428feadba1e425d49f5e2c8ce0e261">LogConnectNeedsPassword</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an indication that connection failed due to no password. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a022c1799439b39c0e7ce0f6b7d53499e"></a><!-- doxytag: member="DatabaseConnection::LogSqlQueryInvalidStatus" ref="a022c1799439b39c0e7ce0f6b7d53499e" args="(const char *msg, ExecStatusType status)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a022c1799439b39c0e7ce0f6b7d53499e">LogSqlQueryInvalidStatus</a> (const char *msg, ExecStatusType status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an indication that a query failed due to reaching an invalid state. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aafe2af477f2ce8be13a7f1c5be044581"></a><!-- doxytag: member="DatabaseConnection::LogSqlQueryFailed" ref="aafe2af477f2ce8be13a7f1c5be044581" args="(const PgError &amp;error)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#aafe2af477f2ce8be13a7f1c5be044581">LogSqlQueryFailed</a> (const <a class="el" href="classPgError.html">PgError</a> &amp;error)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an indication that a query failed due to the server throwing an error. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa9cb7e335b43120351a3f59edef0b22"></a><!-- doxytag: member="DatabaseConnection::IsConnected" ref="afa9cb7e335b43120351a3f59edef0b22" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#afa9cb7e335b43120351a3f59edef0b22">IsConnected</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if this connection is actually connected. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a0c52145f227a92b01f19e5aeb1206223">IsAcceptingWork</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if this connection is able to accept work.  <a href="#a0c52145f227a92b01f19e5aeb1206223"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const wxString &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a45e392ab88b22878b8599eb46006bd9d">DbName</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec598901d1a38e8c2d8387265e3bc0f6"></a><!-- doxytag: member="DatabaseConnection::Relabel" ref="aec598901d1a38e8c2d8387265e3bc0f6" args="(const wxString &amp;newLabel)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#aec598901d1a38e8c2d8387265e3bc0f6">Relabel</a> (const wxString &amp;newLabel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the label (application_name) of this connection. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a6e6ea9cc02963516fff50b212b1228c7">GetState</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const wxString &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#a768e2d066a5e4af7854dd9cc9853054f">Identification</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae660ef9de24ba2c27b95a0940d7c148"></a><!-- doxytag: member="DatabaseConnection::SetNotificationMonitor" ref="aae660ef9de24ba2c27b95a0940d7c148" args="(DatabaseNotificationMonitor *monitor, NotificationReceiver *receiver)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#aae660ef9de24ba2c27b95a0940d7c148">SetNotificationMonitor</a> (<a class="el" href="classDatabaseNotificationMonitor.html">DatabaseNotificationMonitor</a> *monitor, <a class="el" href="classDatabaseConnection_1_1NotificationReceiver.html">NotificationReceiver</a> *receiver)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate this connection with a notification monitor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#af0e56e431bcd27f76527d83e45e56634">IsStatementPrepared</a> (const wxString &amp;name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2df448b7b2d207e82c9b4e341385d12"></a><!-- doxytag: member="DatabaseConnection::MarkStatementPrepared" ref="af2df448b7b2d207e82c9b4e341385d12" args="(const wxString &amp;name)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html#af2df448b7b2d207e82c9b4e341385d12">MarkStatementPrepared</a> (const wxString &amp;name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a statement as having been prepared on this connection. <br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5cd181bfe09cfad66e8f3d87feef1439"></a><!-- doxytag: member="DatabaseConnection::WorkerThread" ref="a5cd181bfe09cfad66e8f3d87feef1439" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>WorkerThread</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f010d9b3d2799b52184564401526518"></a><!-- doxytag: member="DatabaseConnection::DisconnectWork" ref="a9f010d9b3d2799b52184564401526518" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>DisconnectWork</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a309ef35276dab5b37a59f1b5f1497e5f"></a><!-- doxytag: member="DatabaseConnection::DatabaseWork" ref="a309ef35276dab5b37a59f1b5f1497e5f" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>DatabaseWork</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bcb05340ecded367b918ef4996413ad"></a><!-- doxytag: member="DatabaseConnection::RegisterWithMonitor" ref="a8bcb05340ecded367b918ef4996413ad" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>RegisterWithMonitor</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa95d806025a73dbb5c060617e5a3d608"></a><!-- doxytag: member="DatabaseConnection::UnregisterWithMonitor" ref="aa95d806025a73dbb5c060617e5a3d608" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>UnregisterWithMonitor</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Represents a connection to a server/database. </p>
<p>There is a one-to-one correspondence between a <a class="el" href="classDatabaseConnection.html" title="Represents a connection to a server/database.">DatabaseConnection</a>, a database worker thread and a PGconn*. All interaction with libpq happens in the context of the database worker thread.</p>
<p>A database connection maintains a queue of <a class="el" href="classDatabaseWork.html" title="Encapsulates a unit of work to be performed on a database connection.">DatabaseWork</a> objects. The worker thread processes this queue and executes the database work in a FIFO manner.</p>
<p>As a special case, the database connection can add a work object to the queue that will cause the worker thread to ensure the server connection is closed and then exit. Once this work object has been <b>added</b> (not necessarily executed), the work queue will not accept any more work objects. </p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92"></a><!-- doxytag: member="DatabaseConnection::State" ref="aa5a494e6ccea6dd279d6be7db04c2e92" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92">DatabaseConnection::State</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connection state. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92aeb128abcd9165b2dba1ebfdece72dcae"></a><!-- doxytag: member="NOT_CONNECTED" ref="aa5a494e6ccea6dd279d6be7db04c2e92aeb128abcd9165b2dba1ebfdece72dcae" args="" -->NOT_CONNECTED</em>&nbsp;</td><td>
<p>worker thread not started or already joined </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92a14a506e7c11ef09afcd5daaec811a572"></a><!-- doxytag: member="INITIALISING" ref="aa5a494e6ccea6dd279d6be7db04c2e92a14a506e7c11ef09afcd5daaec811a572" args="" -->INITIALISING</em>&nbsp;</td><td>
<p>worker thread is starting up </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92ae5093d334f5876d1200e4e16d7a7319f"></a><!-- doxytag: member="CONNECTING" ref="aa5a494e6ccea6dd279d6be7db04c2e92ae5093d334f5876d1200e4e16d7a7319f" args="" -->CONNECTING</em>&nbsp;</td><td>
<p>connection in progress </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92a825b1401114c4dd6ebc6630c9e753128"></a><!-- doxytag: member="IDLE" ref="aa5a494e6ccea6dd279d6be7db04c2e92a825b1401114c4dd6ebc6630c9e753128" args="" -->IDLE</em>&nbsp;</td><td>
<p>worker thread waiting for work </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92afd4222b29a5671fcd2dfaf5c0645fbba"></a><!-- doxytag: member="EXECUTING" ref="aa5a494e6ccea6dd279d6be7db04c2e92afd4222b29a5671fcd2dfaf5c0645fbba" args="" -->EXECUTING</em>&nbsp;</td><td>
<p>worker thread is executing work </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa5a494e6ccea6dd279d6be7db04c2e92a398a7d72845d5f7cdf9acdd9f3a081cf"></a><!-- doxytag: member="DISCONNECTED" ref="aa5a494e6ccea6dd279d6be7db04c2e92a398a7d72845d5f7cdf9acdd9f3a081cf" args="" -->DISCONNECTED</em>&nbsp;</td><td>
<p>worker thread finished running, but not joined </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a95bc5c496c83846966bfa8d69cb493d9"></a><!-- doxytag: member="DatabaseConnection::DatabaseConnection" ref="a95bc5c496c83846966bfa8d69cb493d9" args="(const ServerConnection &amp;server, const wxString &amp;dbname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDatabaseConnection.html#a95bc5c496c83846966bfa8d69cb493d9">DatabaseConnection::DatabaseConnection</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classServerConnection.html">ServerConnection</a> &amp;&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wxString &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a database connection. </p>
<p>The worker thread is not started nor any connection made until the Connect method is called. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af296a8eac29ce02536da0f056c507346"></a><!-- doxytag: member="DatabaseConnection::AddWork" ref="af296a8eac29ce02536da0f056c507346" args="(DatabaseWork *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDatabaseConnection.html#af296a8eac29ce02536da0f056c507346">DatabaseConnection::AddWork</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDatabaseWork.html">DatabaseWork</a> *&#160;</td>
          <td class="paramname"><em>work</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds work to this connection's work queue. </p>
<p>This will throw an assertion failure if the database connection is not live </p>

</div>
</div>
<a class="anchor" id="a2039df6813bd1f9900f3967d4b68351d"></a><!-- doxytag: member="DatabaseConnection::AddWorkOnlyIfConnected" ref="a2039df6813bd1f9900f3967d4b68351d" args="(DatabaseWork *work)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDatabaseConnection.html#a2039df6813bd1f9900f3967d4b68351d">DatabaseConnection::AddWorkOnlyIfConnected</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDatabaseWork.html">DatabaseWork</a> *&#160;</td>
          <td class="paramname"><em>work</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds work to this connections' work queue, if possible. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if work added, false if database connection not live </dd></dl>

</div>
</div>
<a class="anchor" id="a0afbcc93d90448e5639ca18f734e14c9"></a><!-- doxytag: member="DatabaseConnection::BeginDisconnection" ref="a0afbcc93d90448e5639ca18f734e14c9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDatabaseConnection.html#a0afbcc93d90448e5639ca18f734e14c9">DatabaseConnection::BeginDisconnection</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request disconnection. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the request has been queued, false if the connection is already disconnected </dd></dl>

</div>
</div>
<a class="anchor" id="ac0be91d57adf17622dcb32bb2247b804"></a><!-- doxytag: member="DatabaseConnection::CloseSync" ref="ac0be91d57adf17622dcb32bb2247b804" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDatabaseConnection.html#ac0be91d57adf17622dcb32bb2247b804">DatabaseConnection::CloseSync</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the connection synchronously. </p>
<p>This requests the connection be closed, and waits until that is done. </p>

</div>
</div>
<a class="anchor" id="a74b007c99626b37e0105a38111e9ca85"></a><!-- doxytag: member="DatabaseConnection::Connect" ref="a74b007c99626b37e0105a38111e9ca85" args="(ConnectionCallback *callback=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDatabaseConnection.html#a74b007c99626b37e0105a38111e9ca85">DatabaseConnection::Connect</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classConnectionCallback.html">ConnectionCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Begin connection to database. </p>
<p>The database worker thread will be launched and the connection initiated. The result of the connection is communicated via the callback object.</p>
<p>The callback <b>must</b> be allocated on the heap- it will be deleted after one of its "OnConnection" methods has been called.</p>
<p>If no callback is passed, the result is unknown to the caller... this is not really good, as the caller simply has to hope that the connection is made ok. The option to not supply a callback should be removed at some point.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>Connection result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a45e392ab88b22878b8599eb46006bd9d"></a><!-- doxytag: member="DatabaseConnection::DbName" ref="a45e392ab88b22878b8599eb46006bd9d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const wxString&amp; <a class="el" href="classDatabaseConnection.html#a45e392ab88b22878b8599eb46006bd9d">DatabaseConnection::DbName</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the database name this connection is for </dd></dl>

</div>
</div>
<a class="anchor" id="a2db9b9fc08e8551343d7f0d9d52f6f34"></a><!-- doxytag: member="DatabaseConnection::Dispose" ref="a2db9b9fc08e8551343d7f0d9d52f6f34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDatabaseConnection.html#a2db9b9fc08e8551343d7f0d9d52f6f34">DatabaseConnection::Dispose</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dispose of this database connection. </p>
<p>This is basically equivalent to <code>CloseSync</code>. </p>

</div>
</div>
<a class="anchor" id="a6e6ea9cc02963516fff50b212b1228c7"></a><!-- doxytag: member="DatabaseConnection::GetState" ref="a6e6ea9cc02963516fff50b212b1228c7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDatabaseConnection.html#aa5a494e6ccea6dd279d6be7db04c2e92">State</a> <a class="el" href="classDatabaseConnection.html#a6e6ea9cc02963516fff50b212b1228c7">DatabaseConnection::GetState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the state of this connection </dd></dl>

</div>
</div>
<a class="anchor" id="a768e2d066a5e4af7854dd9cc9853054f"></a><!-- doxytag: member="DatabaseConnection::Identification" ref="a768e2d066a5e4af7854dd9cc9853054f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const wxString&amp; <a class="el" href="classDatabaseConnection.html#a768e2d066a5e4af7854dd9cc9853054f">DatabaseConnection::Identification</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>a string identifying this connection </dd></dl>

</div>
</div>
<a class="anchor" id="a0c52145f227a92b01f19e5aeb1206223"></a><!-- doxytag: member="DatabaseConnection::IsAcceptingWork" ref="a0c52145f227a92b01f19e5aeb1206223" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDatabaseConnection.html#a0c52145f227a92b01f19e5aeb1206223">DatabaseConnection::IsAcceptingWork</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tests if this connection is able to accept work. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>false if the connection is disconnected, or a disconnection has been requested </dd></dl>

</div>
</div>
<a class="anchor" id="af0e56e431bcd27f76527d83e45e56634"></a><!-- doxytag: member="DatabaseConnection::IsStatementPrepared" ref="af0e56e431bcd27f76527d83e45e56634" args="(const wxString &amp;name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDatabaseConnection.html#af0e56e431bcd27f76527d83e45e56634">DatabaseConnection::IsStatementPrepared</a> </td>
          <td>(</td>
          <td class="paramtype">const wxString &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>true if a statement with the given name has been prepared on this connection </dd></dl>

</div>
</div>
<a class="anchor" id="a172ba517f12e13b5f085eef1e40db7d8"></a><!-- doxytag: member="DatabaseConnection::LogSql" ref="a172ba517f12e13b5f085eef1e40db7d8" args="(const char *sql)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDatabaseConnection.html#a172ba517f12e13b5f085eef1e40db7d8">DatabaseConnection::LogSql</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sql</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Logs SQL performed on this connection. </p>
<p>This is typically called by database workers. </p>

</div>
</div>
<a class="anchor" id="a1843e1eff1fd933a3b97d03cce820070"></a><!-- doxytag: member="DatabaseConnection::WaitUntilClosed" ref="a1843e1eff1fd933a3b97d03cce820070" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDatabaseConnection.html#a1843e1eff1fd933a3b97d03cce820070">DatabaseConnection::WaitUntilClosed</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until the connection has closed. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if waiting was done, false if the connection was already closed. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="database__connection_8h_source.html">database_connection.h</a></li>
<li>database_connection.cpp</li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 12 2012 01:34:37 for PQWX by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
